<?php
/**
{% for line in header %}
 * {{ line }}
{% endfor %}
 */
{% if strict %}
declare(strict_types=1);
{% endif %}
{% if namespace %}

namespace {{ namespace }};
{% endif %}

use Railt\Compiler\Lexer\Runtime as {{ class }}Runtime;

/**
 * This class has been auto-generated by the {{ self }}
 */
final class {{ class }} extends {{ class }}Runtime
{
    /**#@+
     * List of {{ class }}::class tokens defined as public constants
     */
    {% for k, def in tokens %}
public const {{ def.getName }} = {{ def.getName | string | raw }};
    {% endfor %}
/**#@-*/

    /**
     * @var string The PCRE compiled pattern
     */
    protected $pattern = {{ pattern | string | raw }};

    /**
     * @var array|bool[] List of tokens in format "[ token_name => kept_or_skipped ]"
     */
    protected $tokens = [
        {% for def in tokens %}
self::{{ def.getName }} => {{ (not def.isSkipped) | boolean | raw }},
        {% endfor %}
    ];

    /**
     * @return string Returns the lexer compilation date and time in RFC3339 format
     */
    public function getBuiltDate(): string
    {
        return {{ "now" | date("Y-m-d\TH:i:s.vP") | string | raw }};
    }
}
